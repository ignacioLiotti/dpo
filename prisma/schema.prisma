generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASEURL")
}

model prices {
  id        Int      @id @default(autoincrement())
  itemId    Int
  price     Float?
  priceDate DateTime
  item      items    @relation(fields: [itemId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([itemId], map: "prices_itemId_fkey")
}

model items {
  id           Int      @id @default(autoincrement())
  cod          String?  @db.VarChar(255)
  name         String   @db.VarChar(255)
  unit         String?  @db.VarChar(255)
  category     String?  @db.VarChar(255)
  type         String?  @db.VarChar(255)
  origin_table String?  @db.VarChar(255)
  prices       prices[]
}

model presupuestos {
  id         Int          @id @default(autoincrement())
  obraId     Int
  data       Json
  createdAt  DateTime     @default(now())
  updatedAt  DateTime     @updatedAt
  mediciones mediciones[]
  obra       obras        @relation(fields: [obraId], references: [id])

  @@index([obraId], map: "presupuestos_obraId_fkey")
}

model mediciones {
  id            Int          @id @default(autoincrement())
  presupuestoId Int
  data          Json
  createdAt     DateTime     @default(now())
  updatedAt     DateTime     @updatedAt
  presupuesto   presupuestos @relation(fields: [presupuestoId], references: [id])

  @@index([presupuestoId], map: "mediciones_presupuestoId_fkey")
}

model obras {
  id                    Int               @id @default(autoincrement())
  NombreObra            String?           @unique(map: "NombreObra") @db.VarChar(200)
  Monto_Contrato        Float?
  inaugurada            Int?              @db.SmallInt
  plazo                 Int?
  Fecha_de_Contrato     DateTime?         @map("Fecha de Contrato")
  Fecha_de_Inicio       DateTime?         @map("Fecha de Inicio")
  Fecha_de_Finalizaci_n DateTime?         @map("Fecha de Finalizaci√≥n")
  Fechalicit            DateTime?
  data                  Json
  certificaciones       certificaciones[]
  presupuestos          presupuestos[]
}

model certificaciones {
  id             Int       @id @default(autoincrement())
  NumCertificado String?   @db.VarChar(50)
  Monto          Float?
  MesCertificado DateTime?
  data           Json
  IdObras        Int?
  IdEmpresa      Int?
  FechaLiq       DateTime?
  FechaIng       DateTime?
  pagado         Int?      @db.SmallInt
  netoapagar     Float?
  obra           obras?    @relation(fields: [IdObras], references: [id])

  @@index([IdObras], map: "certificaciones_IdObras_fkey")
}
